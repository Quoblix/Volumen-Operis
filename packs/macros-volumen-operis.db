{"name":"Random Occupation","type":"script","scope":"global","author":"xo2eONvUwXJvavTj","img":"icons/skills/trades/construction-carpentry-hammer.webp","command":"/* \nMacro Name: Random Occupation\nAuthor: Quoblix\nDate: 2023-04-23\n\nUpdates selected tokens to have a random occupation that will show up after their name. \n\nSo for example, a token with the name:\n\n  Quoblix Hillbilus\n\nwill get changed to:\n\n  Quoblix Hillbilus, Goblintologist\n\n\n--> You don't need to change anything more below this line <--\n--------------------------------------------------------------\n*/\n\n// What are the names of the roll tables you want to use?\nconst rollTable = \"NPC Occupations\"\n\n\n// Get the roll table\nconst name1 = game.tables.getName(rollTable);\n\n\n// Get the selected tokens\nconst tokens = canvas.tokens.controlled;\n\n// Loop through the tokens and update their names\nif (tokens.length > 0) {\n    for (let index = 0; index < tokens.length; ++index) {\n        const token = tokens[index];\n        rollOccupation = await name1.roll();\n        occupationName = rollOccupation.results[0].data.text\n        if (occupationName.length > 0)\n        {\n          rollName = token.name + \", \" + occupationName;\n          UpdateName(token, rollName);\n        }\n    }\n}\nelse {\n    // Show an alert if no tokens are selected\n    ui.notifications.warn(\"You need to select one or more tokens\");\n}\n\n// Function to update the token name\nfunction UpdateName(token, rollName) {\n    actor = token.actor;\n    updates = [{ _id: token.id, name: rollName }];\n    canvas.scene.updateEmbeddedDocuments(\"Token\", updates);\n}","flags":{"core":{"sourceId":"Macro.Xplx2W4R4M7W6KVy"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1681676389737,"modifiedTime":1682272098776,"lastModifiedBy":"xo2eONvUwXJvavTj"},"_id":"Xplx2W4R4M7W6KVy","folder":null,"sort":0,"ownership":{"default":0,"xo2eONvUwXJvavTj":3}}
{"name":"Name Male NPCs","type":"script","scope":"global","author":"xo2eONvUwXJvavTj","img":"icons/sundries/flags/banner-blue.webp","command":"/* \nMacro Name: Names NPCs\nAuthor: Quoblix\nDate: 2023-04-23\n\nUpdates selected tokens to have a random MALE first and last name from roll tables. To update the list of available names, edit the following roll tables:\n- NPC Boys First Names\n- NPC Last Names\n\n*/\n\n// --> You shouldn't need to change anything below this line <--\n//--------------------------------------------------------------\n\nconst rollTableFirstName = \"NPC Male First Names\"\nconst rollTableLastName = \"NPC Last Names\"\n\n\n// Get the roll table\nconst name1 = game.tables.getName(rollTableFirstName);\nconst name2 = game.tables.getName(rollTableLastName);\n\n\n// Get the selected tokens\nconst tokens = canvas.tokens.controlled;\n\n// Loop through the tokens and update their names\nif (tokens.length > 0) {\n    for (let index = 0; index < tokens.length; ++index) {\n        const token = tokens[index];\n        rollFirstName = await name1.roll();\n        rollLastName = await name2.roll();\n        rollName = rollFirstName.results[0].data.text + \" \" + rollLastName.results[0].data.text;\n        UpdateName(token, rollName);\n    }\n}\nelse {\n    // Show an alert if no tokens are selected\n    ui.notifications.warn(\"No Tokens were selected\");\n}\n\n// Function to update the token name\nfunction UpdateName(token, rollName) {\n    actor = token.actor;\n    updates = [{ _id: token.id, name: rollName }];\n    canvas.scene.updateEmbeddedDocuments(\"Token\", updates);\n}","flags":{"core":{"sourceId":"Macro.ZzBsWIrgEx1OnDVa"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1681674991195,"modifiedTime":1682272098776,"lastModifiedBy":"xo2eONvUwXJvavTj"},"_id":"ZzBsWIrgEx1OnDVa","folder":null,"sort":0,"ownership":{"default":0,"xo2eONvUwXJvavTj":3}}
{"name":"Randomize Monster HP","type":"script","scope":"global","author":"xo2eONvUwXJvavTj","img":"icons/magic/life/heart-area-circle-red-green.webp","command":"/* Randomize Monster HP\nAuthor: Quoblix\nDate: 2023-04-23\n\nUpdates selected tokens to have a random min/max value for their HP based on their Hit Point Formula. If no formula is stored with the token, then no update to HP is made.\n\n--> You don't need to change anything below this line <--\n---------------------------------------------------------\n*/\n\n// Get the selected tokens\nconst tokens = canvas.tokens.controlled;\n\n// Loop through the tokens and update their HP\nif (tokens.length > 0) {\n    for (let index = 0; index < tokens.length; ++index) {\n        const token = tokens[index];\n        const hpFormula = token.actor.system.attributes.hp.formula;\n        \n        // If a formula exists, then Roll the dice to see what the HP should be\n        if (hpFormula.includes('d')) {\n            // Roll the HP formula synchronously\n            const rollResult = new Roll(hpFormula, token.actor.getRollData()).roll({async: false});\n            const newHPvalue = rollResult.total;\n            console.log(newHPvalue);\n            // Send the token and HP data to get updated\n            UpdateHP(token, newHPvalue);\n            ui.notifications.notify(`Updated ${token.name}'s hit points to ${newHPvalue}.`);\n        }\n    }\n}\n// Show an alert if no tokens are selected\nelse {\n    ui.notifications.warn(\"You need to select one or more Tokens\");\n}\n\n// Function to update the token HP\nfunction UpdateHP(token, newHP) {\n    updates = [{\n        _id: token.id,\n        \"actorData.system.attributes.hp.max\": newHP,\n        \"actorData.system.attributes.hp.value\": newHP\n    }];\n\n    canvas.scene.updateEmbeddedDocuments(\"Token\", updates);\n\n    \n}","flags":{"core":{"sourceId":"Macro.gN5C8LKZFPTrh47o"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1681677520524,"modifiedTime":1682272098777,"lastModifiedBy":"xo2eONvUwXJvavTj"},"_id":"gN5C8LKZFPTrh47o","folder":null,"sort":0,"ownership":{"default":0,"xo2eONvUwXJvavTj":3}}
{"name":"Name Skeletons","type":"script","scope":"global","author":"xo2eONvUwXJvavTj","img":"icons/magic/death/skull-humanoid-white-blue.webp","command":"/* \nMacro Name: Name Skeletons\nAuthor: Quoblix\nDate: 2023-04-23\n\nUpdates selected tokens to have a random name from the \"Skeleton Names\" roll table. You can adapt this for different creatures following these steps:\n\n1) Duplicate this Macro and the \"Skeleton Names\" roll table\n2) Change the names in the new roll table to match the creature you want to name\n3) Edit the new macro and update the rolltable that the macro should use\n*/\n\n// What is the name of the roll table you want to use?\nconst rollTable = \"Skeleton Names\"\n\n// --> You shouldn't need to change anything more below this line <--\n// ------------------------------------------------------------------\n\n// Get the roll table\nconst name1 = game.tables.getName(rollTable);\n\n// Get the selected tokens\nconst tokens = canvas.tokens.controlled;\n\n// Loop through the tokens and update their names\nif (tokens.length > 0) {\n    for (let index = 0; index < tokens.length; ++index) {\n        const token = tokens[index];\n        rollName = await name1.roll();\n        newName = rollName.results[0].data.text\n        UpdateName(token, newName);\n    }\n}\nelse {\n    // Show an alert if no tokens are selected\n    ui.notifications.warn(\"No Tokens were selected\");\n}\n\n// Function to update the token name\nfunction UpdateName(token, newName) {\n    actor = token.actor;\n    updates = [{ _id: token.id, name: newName }];\n    canvas.scene.updateEmbeddedDocuments(\"Token\", updates);\n}","flags":{"core":{"sourceId":"Macro.scf7WzJDaD2poax7"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1681671982532,"modifiedTime":1682272098777,"lastModifiedBy":"xo2eONvUwXJvavTj"},"_id":"scf7WzJDaD2poax7","folder":null,"sort":0,"ownership":{"default":0,"xo2eONvUwXJvavTj":3}}
{"name":"Name Female NPCs","type":"script","scope":"global","author":"xo2eONvUwXJvavTj","img":"icons/sundries/flags/banner-pink.webp","command":"/* \nMacro Name: Name Female NPCs\nAuthor: Quoblix\nDate: 2023-04-23\n\nUpdates selected tokens to have a random FEMALE first and last name from roll tables. To update the list of available names, edit the following roll tables:\n\n- NPC Female First Names\n- NPC Last Names\n\n*/\n\n// --> You shouldn't need to change anything below this line <--\n//--------------------------------------------------------------\n\nconst rollTableFirstName = \"NPC Female First Names\"\nconst rollTableLastName = \"NPC Last Names\"\n\n\n// Get the roll table\nconst name1 = game.tables.getName(rollTableFirstName);\nconst name2 = game.tables.getName(rollTableLastName);\n\n\n// Get the selected tokens\nconst tokens = canvas.tokens.controlled;\n\n// Loop through the tokens and update their names\nif (tokens.length > 0) {\n    for (let index = 0; index < tokens.length; ++index) {\n        const token = tokens[index];\n        rollFirstName = await name1.roll();\n        rollLastName = await name2.roll();\n        rollName = rollFirstName.results[0].data.text + \" \" + rollLastName.results[0].data.text;\n        UpdateName(token, rollName);\n    }\n}\nelse {\n    // Show an alert if no tokens are selected\n    ui.notifications.warn(\"No Tokens were selected\");\n}\n\n// Function to update the token name\nfunction UpdateName(token, rollName) {\n    actor = token.actor;\n    updates = [{ _id: token.id, name: rollName }];\n    canvas.scene.updateEmbeddedDocuments(\"Token\", updates);\n}","flags":{"core":{"sourceId":"Macro.7OFnpNGoHcL2Vw0j"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1682267447865,"modifiedTime":1682272098777,"lastModifiedBy":"xo2eONvUwXJvavTj"},"_id":"7OFnpNGoHcL2Vw0j","folder":null,"sort":0,"ownership":{"default":0,"xo2eONvUwXJvavTj":3}}
